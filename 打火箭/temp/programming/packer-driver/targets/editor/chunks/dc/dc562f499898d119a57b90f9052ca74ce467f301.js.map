{"version":3,"sources":["file:///Users/zhangxinxin/NewProject_1/assets/scripts/GameRoot.ts"],"names":["_decorator","Component","Node","input","Input","KeyCode","ccclass","property","GameRoot","playerPosIndex","hensPosXArr","start","initData","openInputEvent","targetX","targetY","player","position","y","setPosition","update","deltaTime","i","hensRoot","children","length","element","x","on","EventType","KEY_DOWN","onKeyDown","event","keyCode","KEY_A","movePlayer","KEY_D","dir"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAA0BC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,O,OAAAA,O;;;;;;;;;OAC7D;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBP,U;;0BAGjBQ,Q,WADZF,OAAO,CAAC,UAAD,C,UAEHC,QAAQ,CAACL,IAAD,C,UACRK,QAAQ,CAACL,IAAD,C,UACRK,QAAQ,CAACL,IAAD,C,2BAJb,MACaM,QADb,SAC8BP,SAD9B,CACwC;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAKpCQ,cALoC,GAKnB,CALmB;AAAA,eAMpCC,WANoC,GAMtB,EANsB;AAAA;;AAQpCC,QAAAA,KAAK,GAAG;AACJ,eAAKC,QAAL;AACA,eAAKC,cAAL;AACA,gBAAMC,OAAO,GAAG,KAAKJ,WAAL,CAAiB,KAAKD,cAAtB,CAAhB;AACA,gBAAMM,OAAO,GAAG,KAAKC,MAAL,CAAYC,QAAZ,CAAqBC,CAArC;AACA,eAAKF,MAAL,CAAYG,WAAZ,CAAwBL,OAAxB,EAAiCC,OAAjC,EAA0C,CAA1C;AACH;;AAEDK,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB,CAlBmC,CAoBpC;;;AACAT,QAAAA,QAAQ,GAAG;AACP,eAAK,IAAIU,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKC,QAAL,CAAcC,QAAd,CAAuBC,MAA3C,EAAmDH,CAAC,EAApD,EAAwD;AACpD,kBAAMI,OAAO,GAAG,KAAKH,QAAL,CAAcC,QAAd,CAAuBF,CAAvB,CAAhB,CADoD,CAEpD;;AACA,iBAAKZ,WAAL,CAAiBY,CAAjB,IAAsBI,OAAO,CAACT,QAAR,CAAiBU,CAAvC;AACH;AACJ,SA3BmC,CA6BpC;;;AACAd,QAAAA,cAAc,GAAG;AACbV,UAAAA,KAAK,CAACyB,EAAN,CAASxB,KAAK,CAACyB,SAAN,CAAgBC,QAAzB,EAAmC,KAAKC,SAAxC,EAAmD,IAAnD;AACH;;AACDA,QAAAA,SAAS,CAACC,KAAD,EAAuB;AAC5B,kBAAQA,KAAK,CAACC,OAAd;AACI,iBAAK5B,OAAO,CAAC6B,KAAb;AACI,mBAAKC,UAAL,CAAgB,CAAC,CAAjB;AACA;;AACJ,iBAAK9B,OAAO,CAAC+B,KAAb;AACI,mBAAKD,UAAL,CAAgB,CAAhB;AACA;;AACJ;AACI;AARR;AAUH;;AACDA,QAAAA,UAAU,CAACE,GAAD,EAAc;AACpB,eAAK5B,cAAL,IAAuB4B,GAAvB;;AACA,cAAI,KAAK5B,cAAL,GAAsB,CAA1B,EAA6B;AACzB,iBAAKA,cAAL,GAAsB,CAAtB;AACH;;AACD,cAAI,KAAKA,cAAL,GAAsB,KAAKC,WAAL,CAAiBe,MAAjB,GAA0B,CAApD,EAAuD;AACnD,iBAAKhB,cAAL,GAAsB,KAAKC,WAAL,CAAiBe,MAAjB,GAA0B,CAAhD;AACH;;AACD,gBAAMX,OAAO,GAAG,KAAKJ,WAAL,CAAiB,KAAKD,cAAtB,CAAhB;AACA,gBAAMM,OAAO,GAAG,KAAKC,MAAL,CAAYC,QAAZ,CAAqBC,CAArC;AACA,eAAKF,MAAL,CAAYG,WAAZ,CAAwBL,OAAxB,EAAiCC,OAAjC,EAA0C,CAA1C;AACH;;AAxDmC,O;;;;;iBACL,I;;;;;;;iBACE,I;;;;;;;iBACA,I","sourcesContent":["import { _decorator, Component, EventKeyboard, Node, input, Input, KeyCode } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('GameRoot')\nexport class GameRoot extends Component {\n    @property(Node) player: Node = null!;\n    @property(Node) hensRoot: Node = null!;\n    @property(Node) eggsRoot: Node = null!;\n\n    playerPosIndex = 0;\n    hensPosXArr = []\n\n    start() {\n        this.initData();\n        this.openInputEvent();\n        const targetX = this.hensPosXArr[this.playerPosIndex];\n        const targetY = this.player.position.y;\n        this.player.setPosition(targetX, targetY, 0);\n    }\n\n    update(deltaTime: number) {\n        \n    }\n\n    // Init Data\n    initData() {\n        for (let i = 0; i < this.hensRoot.children.length; i++) {\n            const element = this.hensRoot.children[i];\n            // hens每个子元素的X坐标 就是player的移动范围\n            this.hensPosXArr[i] = element.position.x;\n        }\n    }\n\n    // Event Handlers\n    openInputEvent() {\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n    }\n    onKeyDown(event: EventKeyboard) {\n        switch (event.keyCode) {\n            case KeyCode.KEY_A:\n                this.movePlayer(-1);\n                break;\n            case KeyCode.KEY_D:\n                this.movePlayer(1);\n                break;\n            default:\n                break;\n        }\n    }\n    movePlayer(dir: 1 | -1) {\n        this.playerPosIndex += dir;\n        if (this.playerPosIndex < 0) {\n            this.playerPosIndex = 0 \n        }\n        if (this.playerPosIndex > this.hensPosXArr.length - 1) {\n            this.playerPosIndex = this.hensPosXArr.length - 1\n        }\n        const targetX = this.hensPosXArr[this.playerPosIndex];\n        const targetY = this.player.position.y;\n        this.player.setPosition(targetX, targetY, 0);\n    }\n      \n}\n\n"]}