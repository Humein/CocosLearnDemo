{"version":3,"sources":["file:///Users/zhangxinxin/XXWorkSpace/Github%E9%A1%B9%E7%9B%AE/Cocos%20%E9%A1%B9%E7%9B%AE/CocosLearnDemo/%E6%89%93%E7%81%AB%E7%AE%AD/assets/scripts/GameRoot.ts"],"names":["_decorator","Component","Node","input","Input","KeyCode","Prefab","instantiate","Collider2D","Contact2DType","director","Director","tween","Label","ccclass","property","GameRoot","playerPosIndex","hensPosXArr","ufoPosXArr","playScore","playHp","start","initData","openInputEvent","startCreateEggs","openColloder2DEvent","update","deltaTime","i","eggsRoot","children","length","element","x","position","y","setPosition","window","innerHeight","destroy","ufoHitRoot","innerWidth","onLoad","on","EventType","KEY_DOWN","onKeyDown","KEY_UP","onKeyUp","onDestroy","off","hensRoot","targetX","targetY","player","updateScore","schedule","egg","eggPrefab","addChild","Math","floor","random","randomPrefab","ufoSingleHit","ufoDoubleHit","ufo","comp","getComponent","BEGIN_CONTACT","selfCollider","otherCollider","contact","once","EVENT_AFTER_PHYSICS","node","console","log","event","keyCode","KEY_A","movePlayer","isAPressed","KEY_D","isDPressed","KEY_W","isWPressed","jumpUPAnimation","jumpDownAnimation","dir","makeMoveStepIndex","setScale","obj","n","to","onUpdate","target","ratio","easing","union","repeat","jumpX","scoreLabel","string"],"mappings":";;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAA0BC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,O,OAAAA,O;AAASC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,a,OAAAA,a;AAAkCC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,K,OAAAA,K;;;;;;;;;OACpK;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBf,U;;0BAGjBgB,Q,WADZF,OAAO,CAAC,UAAD,C,UAEHC,QAAQ,CAACb,IAAD,C,UACRa,QAAQ,CAACb,IAAD,C,UACRa,QAAQ,CAACb,IAAD,C,UACRa,QAAQ,CAACT,MAAD,C,UACRS,QAAQ,CAACb,IAAD,C,UACRa,QAAQ,CAACT,MAAD,C,UACRS,QAAQ,CAACT,MAAD,C,UACRS,QAAQ,CAACF,KAAD,C,2BATb,MACaG,QADb,SAC8Bf,SAD9B,CACwC;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAUpC;AAVoC;;AAAA;;AAAA;;AAAA,eAkBpCgB,cAlBoC,GAkBnB,CAlBmB;AAAA,eAmBpCC,WAnBoC,GAmBtB,EAnBsB;AAAA,eAoBpCC,UApBoC,GAoBvB,EApBuB;AAAA,eAsBpCC,SAtBoC,GAsBxB,CAtBwB;AAAA,eAuBpCC,MAvBoC,GAuB3B,CAvB2B;AAAA;;AAyBpC;AACAC,QAAAA,KAAK,GAAG;AACJ,eAAKC,QAAL;AACA,eAAKC,cAAL;AACA,eAAKC,eAAL;AACA,eAAKC,mBAAL;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACtB,eAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKC,QAAL,CAAcC,QAAd,CAAuBC,MAA3C,EAAmDH,CAAC,EAApD,EAAwD;AACpD,kBAAMI,OAAO,GAAG,KAAKH,QAAL,CAAcC,QAAd,CAAuBF,CAAvB,CAAhB;AACA,kBAAMK,CAAC,GAAGD,OAAO,CAACE,QAAR,CAAiBD,CAA3B,CAFoD,CAGpD;;AACA,kBAAME,CAAC,GAAGH,OAAO,CAACE,QAAR,CAAiBC,CAAjB,GAAqB,MAAMR,SAArC;AACAK,YAAAA,OAAO,CAACI,WAAR,CAAoBH,CAApB,EAAuBE,CAAvB,EAA0B,CAA1B;;AACA,gBAAIA,CAAC,GAAG,CAACE,MAAM,CAACC,WAAhB,EAA6B;AACzBN,cAAAA,OAAO,CAACO,OAAR;AACH;AACJ;;AAED,eAAK,IAAIX,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKY,UAAL,CAAgBV,QAAhB,CAAyBC,MAA7C,EAAqDH,CAAC,EAAtD,EAA0D;AACtD,kBAAMI,OAAO,GAAG,KAAKQ,UAAL,CAAgBV,QAAhB,CAAyBF,CAAzB,CAAhB;AACA,kBAAMK,CAAC,GAAGD,OAAO,CAACE,QAAR,CAAiBD,CAAjB,GAAqB,MAAMN,SAArC;AAA+C;AAC/C,kBAAMQ,CAAC,GAAGH,OAAO,CAACE,QAAR,CAAiBC,CAA3B;AACAH,YAAAA,OAAO,CAACI,WAAR,CAAoBH,CAApB,EAAuBE,CAAvB,EAA0B,CAA1B;;AACA,gBAAIF,CAAC,GAAG,CAACI,MAAM,CAACI,UAAhB,EAA4B;AACxBT,cAAAA,OAAO,CAACO,OAAR;AACH;AACJ;AAEJ;;AAEDG,QAAAA,MAAM,GAAG;AACLjC,UAAAA,QAAQ,CAACkC,EAAT,CAAYxC,KAAK,CAACyC,SAAN,CAAgBC,QAA5B,EAAsC,KAAKC,SAA3C,EAAsD,IAAtD;AACArC,UAAAA,QAAQ,CAACkC,EAAT,CAAYxC,KAAK,CAACyC,SAAN,CAAgBG,MAA5B,EAAoC,KAAKC,OAAzC,EAAkD,IAAlD;AACH;;AAEDC,QAAAA,SAAS,GAAG;AACRxC,UAAAA,QAAQ,CAACyC,GAAT,CAAa/C,KAAK,CAACyC,SAAN,CAAgBC,QAA7B,EAAuC,KAAKC,SAA5C,EAAuD,IAAvD;AACArC,UAAAA,QAAQ,CAACyC,GAAT,CAAa/C,KAAK,CAACyC,SAAN,CAAgBG,MAA7B,EAAqC,KAAKC,OAA1C,EAAmD,IAAnD;AACH,SAjEmC,CAmEpC;;;AACA1B,QAAAA,QAAQ,GAAG;AACP;AACA,eAAK,IAAIM,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKuB,QAAL,CAAcrB,QAAd,CAAuBC,MAA3C,EAAmDH,CAAC,EAApD,EAAwD;AACpD,kBAAMI,OAAO,GAAG,KAAKmB,QAAL,CAAcrB,QAAd,CAAuBF,CAAvB,CAAhB,CADoD,CAEpD;;AACA,iBAAKX,WAAL,CAAiBW,CAAjB,IAAsBI,OAAO,CAACE,QAAR,CAAiBD,CAAjB,GAAqB,EAA3C;AACH,WANM,CAOP;;;AACA,gBAAMmB,OAAO,GAAG,KAAKnC,WAAL,CAAiB,CAAjB,CAAhB;AACA,gBAAMoC,OAAO,GAAG,CAAChB,MAAM,CAACC,WAAR,GAAoB,CAApB,GAAwB,GAAxC;AACA,eAAKgB,MAAL,CAAYlB,WAAZ,CAAwBgB,OAAxB,EAAiCC,OAAjC,EAA0C,CAA1C;AACA,eAAKE,WAAL;AACH,SAhFmC,CAkFpC;;;AACA/B,QAAAA,eAAe,GAAG;AACd,eAAKgC,QAAL,CAAc,MAAM;AAChB;AACA,kBAAMC,GAAG,GAAGnD,WAAW,CAAC,KAAKoD,SAAN,CAAvB;AACA,iBAAK7B,QAAL,CAAc8B,QAAd,CAAuBF,GAAvB,EAHgB,CAIhB;;AACA,kBAAML,OAAO,GAAG,KAAKnC,WAAL,CAAiB2C,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,KAAK7C,WAAL,CAAiBc,MAA5C,CAAjB,CAAhB;AACA,kBAAMsB,OAAO,GAAG,KAAKF,QAAL,CAAcjB,QAAd,CAAuBC,CAAvB,GAA2B,EAA3C;AACAsB,YAAAA,GAAG,CAACrB,WAAJ,CAAgBgB,OAAhB,EAAyBC,OAAzB,EAAkC,CAAlC;AACH,WARD,EAQG,CARH,EADc,CAWd;;AACA,eAAKG,QAAL,CAAc,MAAM;AAChB,kBAAMO,YAAY,GAAGH,IAAI,CAACE,MAAL,KAAgB,GAAhB,GAAsB,KAAKE,YAA3B,GAA0C,KAAKC,YAApE;AACA,kBAAMb,OAAO,GAAG,CAAhB;AACA,kBAAMC,OAAO,GAAG,CAAhB;AACA,kBAAMa,GAAG,GAAG5D,WAAW,CAACyD,YAAD,CAAvB;AACA,iBAAKvB,UAAL,CAAgBmB,QAAhB,CAAyBO,GAAzB,EALgB,CAMhB;;AACAA,YAAAA,GAAG,CAAC9B,WAAJ,CAAgBgB,OAAhB,EAAyBC,OAAzB,EAAkC,CAAlC;AACH,WARD,EAQG,CARH;AAUH,SAzGmC,CA4GpC;;;AACA5B,QAAAA,mBAAmB,GAAG;AAClB,gBAAM0C,IAAI,GAAG,KAAKb,MAAL,CAAYc,YAAZ,CAAyB7D,UAAzB,CAAb;AACA4D,UAAAA,IAAI,QAAJ,YAAAA,IAAI,CAAExB,EAAN,CAASnC,aAAa,CAAC6D,aAAvB,EAAsC,CAACC,YAAD,EAA2BC,aAA3B,EAAsDC,OAAtD,KAA4F;AAC9H/D,YAAAA,QAAQ,CAACgE,IAAT,CAAc/D,QAAQ,CAACgE,mBAAvB,EAA4C,MAAM;AAC9CH,cAAAA,aAAa,CAACI,IAAd,CAAmBpC,OAAnB;AACH,aAFD,EAEG,IAFH;AAGAqC,YAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,iBAAK1D,SAAL,IAAkB,CAAlB;AACA,iBAAKoC,WAAL;AACH,WAPD,EAOG,IAPH;AAQH,SAvHmC,CA0HpC;;;AACAhC,QAAAA,cAAc,GAAG;AACbrB,UAAAA,KAAK,CAACyC,EAAN,CAASxC,KAAK,CAACyC,SAAN,CAAgBC,QAAzB,EAAmC,KAAKC,SAAxC,EAAmD,IAAnD;AACA5C,UAAAA,KAAK,CAACyC,EAAN,CAASxC,KAAK,CAACyC,SAAN,CAAgBG,MAAzB,EAAiC,KAAKC,OAAtC,EAA+C,IAA/C;AACH;;AACDF,QAAAA,SAAS,CAACgC,KAAD,EAAuB;AAC5B,kBAAQA,KAAK,CAACC,OAAd;AACI,iBAAK3E,OAAO,CAAC4E,KAAb;AACI,mBAAKC,UAAL,CAAgB,CAAC,CAAjB;AACA,mBAAKC,UAAL,GAAkB,IAAlB;AACA;;AACJ,iBAAK9E,OAAO,CAAC+E,KAAb;AACI,mBAAKF,UAAL,CAAgB,CAAhB;AACA,mBAAKG,UAAL,GAAkB,IAAlB;AACA;;AACJ,iBAAKhF,OAAO,CAACiF,KAAb;AACI,mBAAKC,UAAL,GAAkB,IAAlB;AACA;;AACJ;AACI;AAbR,WAD4B,CAgB5B;;;AACA,cAAI,KAAKF,UAAL,IAAmB,KAAKE,UAA5B,EAAwC;AACrC,iBAAKC,eAAL;AACF;;AACD,cAAI,KAAKL,UAAL,IAAmB,KAAKI,UAA5B,EAAwC;AACpC,iBAAKC,eAAL;AACH;AACJ;;AAEDvC,QAAAA,OAAO,CAAC8B,KAAD,EAAuB;AAC1B,cAAI,KAAKM,UAAL,IAAmB,KAAKE,UAA5B,EAAwC;AACpC,iBAAKE,iBAAL,CAAuB,CAAvB;AACF;;AACD,cAAI,KAAKN,UAAL,IAAmB,KAAKI,UAA5B,EAAwC;AACpC,iBAAKE,iBAAL,CAAuB,CAAC,CAAxB;AACH;;AACF,kBAAQV,KAAK,CAACC,OAAd;AACI,iBAAK3E,OAAO,CAAC4E,KAAb;AACI,mBAAKE,UAAL,GAAkB,KAAlB;AACA;;AACJ,iBAAK9E,OAAO,CAAC+E,KAAb;AACI,mBAAKC,UAAL,GAAkB,KAAlB;AACA;;AACJ,iBAAKhF,OAAO,CAACiF,KAAb;AACI,mBAAKC,UAAL,GAAkB,KAAlB;AACA;;AACJ;AACI;AAXR;AAaH,SA5KmC,CA8KpC;;;AACAL,QAAAA,UAAU,CAACQ,GAAD,EAAc;AACpB,cAAI,KAAKL,UAAL,IAAmB,KAAKE,UAA5B,EAAwC;AACpC;AACF;;AACD,cAAI,KAAKJ,UAAL,IAAmB,KAAKI,UAA5B,EAAwC;AACrC;AACF;;AACF,eAAKI,iBAAL,CAAuBD,GAAvB;AACA,gBAAMrC,OAAO,GAAG,KAAKnC,WAAL,CAAiB,KAAKD,cAAtB,CAAhB;AACA,gBAAMqC,OAAO,GAAG,KAAKC,MAAL,CAAYpB,QAAZ,CAAqBC,CAArC;AACA,eAAKmB,MAAL,CAAYlB,WAAZ,CAAwBgB,OAAxB,EAAiCC,OAAjC,EAA0C,CAA1C;AACH;;AAEDqC,QAAAA,iBAAiB,CAACD,GAAD,EAAa;AAC1B,eAAKzE,cAAL,IAAuByE,GAAvB;;AACA,cAAI,KAAKzE,cAAL,GAAsB,CAA1B,EAA6B;AACzB,iBAAKA,cAAL,GAAsB,CAAtB;AACH;;AACD,cAAI,KAAKA,cAAL,GAAsB,KAAKC,WAAL,CAAiBc,MAAjB,GAA0B,CAApD,EAAuD;AACnD,iBAAKf,cAAL,GAAsB,KAAKC,WAAL,CAAiBc,MAAjB,GAA0B,CAAhD;AACH;;AACD6C,UAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ,EAAmC,KAAK7D,cAAxC;AACH,SArMmC,CAuMpC;;;AACAuE,QAAAA,eAAe,GAAG;AACd,eAAKjC,MAAL,CAAYqC,QAAZ,CAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B;AACA,gBAAMxD,CAAC,GAAG,CAACE,MAAM,CAACC,WAAR,GAAoB,CAApB,GAAwB,GAAlC;AACA,gBAAMsD,GAAG,GAAG;AACRC,YAAAA,CAAC,EAAE1D;AADK,WAAZ;AAGAxB,UAAAA,KAAK,CAACiF,GAAD,CAAL,CACKE,EADL,CACQ,GADR,EACa;AAACD,YAAAA,CAAC,EAAE;AAAJ,WADb,EACsB;AACdE,YAAAA,QAAQ,EAAE,CAACC,MAAD,EAASC,KAAT,KAAmB;AACzB,mBAAK3C,MAAL,CAAYlB,WAAZ,CAAwB,KAAKkB,MAAL,CAAYpB,QAAZ,CAAqBD,CAA7C,EAAgD2D,GAAG,CAACC,CAApD;AACH,aAHa;AAIdK,YAAAA,MAAM,EAAE,SAJM,CAII;;AAJJ,WADtB,EAOKJ,EAPL,CAOQ,GAPR,EAOa;AAACD,YAAAA,CAAC,EAAE1D;AAAJ,WAPb,EAOqB;AACb4D,YAAAA,QAAQ,EAAE,CAACC,MAAD,EAASC,KAAT,KAAmB;AACzB,mBAAK3C,MAAL,CAAYlB,WAAZ,CAAwB,KAAKkB,MAAL,CAAYpB,QAAZ,CAAqBD,CAA7C,EAAgD2D,GAAG,CAACC,CAApD;AACH,aAHY;AAIbK,YAAAA,MAAM,EAAE;AAJK,WAPrB,EAaKC,KAbL,GAcKC,MAdL,CAcY,CAdZ,EAeK/E,KAfL;AAgBH;;AAEDmE,QAAAA,iBAAiB,CAACC,GAAD,EAAc;AAC3B,eAAKC,iBAAL,CAAuBD,GAAvB;AACA,gBAAMY,KAAK,GAAGZ,GAAG,KAAK,CAAR,GAAY,EAAZ,GAAiB,CAAC,EAAhC;AACA,eAAKnC,MAAL,CAAYqC,QAAZ,CAAqB,CAArB,EAAwB,CAAxB,EAA2B,CAA3B;AACA,gBAAMC,GAAG,GAAG;AACRC,YAAAA,CAAC,EAAE,KAAKvC,MAAL,CAAYpB,QAAZ,CAAqBD;AADhB,WAAZ;AAGAtB,UAAAA,KAAK,CAACiF,GAAD,CAAL,CACCE,EADD,CACI,EADJ,EACQ;AAACD,YAAAA,CAAC,EAAE,KAAKvC,MAAL,CAAYpB,QAAZ,CAAqBD,CAArB,GAAyBoE;AAA7B,WADR,EAC6C;AACzCN,YAAAA,QAAQ,EAAE,CAACC,MAAD,EAASC,KAAT,KAAmB;AACzB,mBAAK3C,MAAL,CAAYlB,WAAZ,CAAwBwD,GAAG,CAACC,CAA5B,EAA+B,KAAKvC,MAAL,CAAYpB,QAAZ,CAAqBC,CAApD;AACH;AAHwC,WAD7C,EAMCd,KAND;AAOH,SA9OmC,CAgPpC;;;AACQkC,QAAAA,WAAW,GAAG;AAClB,eAAK+C,UAAL,CAAgBC,MAAhB,GAA0B,GAAE,KAAKpF,SAAU,IAA3C;AACH;;AAnPmC,O;;;;;iBACL,I;;;;;;;iBACE,I;;;;;;;iBACA,I;;;;;;;iBACK,I;;;;;;;iBACH,I;;;;;;;iBACM,I;;;;;;;iBACA,I;;;;;;;iBACJ,I;;qFAGpCL,Q;;;;;iBAC6B,K;;sFAC7BA,Q;;;;;iBAC6B,K;;sFAC7BA,Q;;;;;iBAC6B,K","sourcesContent":["import { _decorator, Component, EventKeyboard, Node, input, Input, KeyCode, Prefab, instantiate, Collider2D, Contact2DType, IPhysics2DContact, director, Director, tween, Label} from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('GameRoot')\nexport class GameRoot extends Component {\n    @property(Node) player: Node = null!;\n    @property(Node) hensRoot: Node = null!;\n    @property(Node) eggsRoot: Node = null!;\n    @property(Prefab) eggPrefab: Prefab = null!;\n    @property(Node) ufoHitRoot: Node = null!;\n    @property(Prefab) ufoSingleHit: Prefab = null!;\n    @property(Prefab) ufoDoubleHit: Prefab = null!;\n    @property(Label) scoreLabel: Label = null!;\n\n    // 在组件的属性中声明按键状态\n    @property\n    private isDPressed: boolean = false;\n    @property\n    private isWPressed: boolean = false;\n    @property\n    private isAPressed: boolean = false;\n\n    playerPosIndex = 0;\n    hensPosXArr = []\n    ufoPosXArr = []\n     \n    playScore = 0\n    playHp = 3\n\n    // LIFE-CYCLE CALLBACKS:\n    start() {\n        this.initData();\n        this.openInputEvent();\n        this.startCreateEggs();\n        this.openColloder2DEvent();\n    }\n\n    update(deltaTime: number) {\n        for (let i = 0; i < this.eggsRoot.children.length; i++) {\n            const element = this.eggsRoot.children[i];\n            const x = element.position.x;\n            // 下落速度\n            const y = element.position.y - 150 * deltaTime;\n            element.setPosition(x, y, 0);\n            if (y < -window.innerHeight) {\n                element.destroy();\n            }\n        }\n\n        for (let i = 0; i < this.ufoHitRoot.children.length; i++) {\n            const element = this.ufoHitRoot.children[i];\n            const x = element.position.x - 150 * deltaTime;;\n            const y = element.position.y; \n            element.setPosition(x, y, 0);\n            if (x < -window.innerWidth) {\n                element.destroy();\n            }\n        }\n\n    }\n    \n    onLoad() {\n        director.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n        director.on(Input.EventType.KEY_UP, this.onKeyUp, this);\n    }\n\n    onDestroy() {\n        director.off(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n        director.off(Input.EventType.KEY_UP, this.onKeyUp, this);\n    }\n\n    // Init Data\n    initData() {\n        // hens每个子元素的X坐标\n        for (let i = 0; i < this.hensRoot.children.length; i++) {\n            const element = this.hensRoot.children[i];\n            // hens每个子元素的X坐标就是player的移动范围\n            this.hensPosXArr[i] = element.position.x - 30;\n        }\n        // player初始位置\n        const targetX = this.hensPosXArr[0];\n        const targetY = -window.innerHeight/2 + 100;\n        this.player.setPosition(targetX, targetY, 0);\n        this.updateScore();\n    }\n\n    // Init Prefab\n    startCreateEggs() {\n        this.schedule(() => {\n            // 生产egg\n            const egg = instantiate(this.eggPrefab);\n            this.eggsRoot.addChild(egg);\n            // 配置egg的位置\n            const targetX = this.hensPosXArr[Math.floor(Math.random() * this.hensPosXArr.length)];\n            const targetY = this.hensRoot.position.y - 80 \n            egg.setPosition(targetX, targetY, 0);\n        }, 1);\n\n        // 生产Car\n        this.schedule(() => {\n            const randomPrefab = Math.random() < 0.5 ? this.ufoSingleHit : this.ufoDoubleHit;\n            const targetX = 0;\n            const targetY = 0;\n            const ufo = instantiate(randomPrefab);\n            this.ufoHitRoot.addChild(ufo);\n            // XXTODO 预制体之间间距默认是80，但是 ufoDoubleHit与其他预制体包括它自己的间距是:120\n            ufo.setPosition(targetX, targetY, 0);\n        }, 3);\n        \n    }\n        \n\n    // Init big bang\n    openColloder2DEvent() {\n        const comp = this.player.getComponent(Collider2D);\n        comp?.on(Contact2DType.BEGIN_CONTACT, (selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) => {\n            director.once(Director.EVENT_AFTER_PHYSICS, () => {\n                otherCollider.node.destroy();\n            }, this);\n            console.log('碰撞开始');\n            this.playScore += 1;\n            this.updateScore();\n        }, this)\n    }\n\n\n    // Event input Handlers\n    openInputEvent() {\n        input.on(Input.EventType.KEY_DOWN, this.onKeyDown, this);\n        input.on(Input.EventType.KEY_UP, this.onKeyUp, this);\n    }\n    onKeyDown(event: EventKeyboard) {\n        switch (event.keyCode) {\n            case KeyCode.KEY_A:\n                this.movePlayer(-1);\n                this.isAPressed = true;\n                break;\n            case KeyCode.KEY_D:\n                this.movePlayer(1);\n                this.isDPressed = true;\n                break;\n            case KeyCode.KEY_W:\n                this.isWPressed = true;\n                break;\n            default:\n                break;\n        }\n        // 同时按下了 KEY_D 和 KEY_W\n        if (this.isDPressed && this.isWPressed) {\n           this.jumpUPAnimation();\n        }\n        if (this.isAPressed && this.isWPressed) {\n            this.jumpUPAnimation();\n        }\n    }\n\n    onKeyUp(event: EventKeyboard) {\n        if (this.isDPressed && this.isWPressed) {\n            this.jumpDownAnimation(1);\n         }\n         if (this.isAPressed && this.isWPressed) {\n             this.jumpDownAnimation(-1);\n         }\n        switch (event.keyCode) {\n            case KeyCode.KEY_A:\n                this.isAPressed = false;\n                break;\n            case KeyCode.KEY_D:\n                this.isDPressed = false;\n                break;\n            case KeyCode.KEY_W:\n                this.isWPressed = false;\n                break;\n            default:\n                break;\n        }\n    }\n   \n    // Event Handlers\n    movePlayer(dir: 1 | -1) {\n        if (this.isDPressed && this.isWPressed) {\n            return;\n         }\n         if (this.isAPressed && this.isWPressed) {\n            return;\n         }\n        this.makeMoveStepIndex(dir);\n        const targetX = this.hensPosXArr[this.playerPosIndex];\n        const targetY = this.player.position.y;\n        this.player.setPosition(targetX, targetY, 0);\n    }\n\n    makeMoveStepIndex(dir: 1 | -1){\n        this.playerPosIndex += dir;\n        if (this.playerPosIndex < 0) {\n            this.playerPosIndex = 0 \n        }\n        if (this.playerPosIndex > this.hensPosXArr.length - 1) {\n            this.playerPosIndex = this.hensPosXArr.length - 1\n        }\n        console.log('this.playerPosIndex', this.playerPosIndex);\n    }\n\n    // Animation\n    jumpUPAnimation() {\n        this.player.setScale(1.2, 1.2, 1.2);\n        const y = -window.innerHeight/2 + 100;\n        const obj = {\n            n: y\n        }   \n        tween(obj)\n            .to(0.5, {n: 20}, {\n                onUpdate: (target, ratio) => {\n                    this.player.setPosition(this.player.position.x, obj.n);\n                },\n                easing: 'quadOut' // 缓动曲线为弹性曲线\n            })\n            .to(0.5, {n: y}, {\n                onUpdate: (target, ratio) => {\n                    this.player.setPosition(this.player.position.x, obj.n); \n                },\n                easing: 'quadIn'\n            })\n            .union()\n            .repeat(1)\n            .start();\n    }\n\n    jumpDownAnimation(dir: 1 | -1) {\n        this.makeMoveStepIndex(dir);\n        const jumpX = dir === 1 ? 80 : -80;\n        this.player.setScale(1, 1, 1);\n        const obj = {\n            n: this.player.position.x\n        }\n        tween(obj)\n        .to(.5, {n: this.player.position.x + jumpX}, {\n            onUpdate: (target, ratio) => {\n                this.player.setPosition(obj.n, this.player.position.y);\n            }\n        })\n        .start();\n    }\n\n    // Private Method\n    private updateScore() {\n        this.scoreLabel.string = `${this.playScore} 分`\n    }\n      \n}\n\n"]}